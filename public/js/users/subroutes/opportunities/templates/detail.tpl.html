<div class="content-header">
    <div class="content-header-block text-left">
        <!-- buttons -->
    </span>
    </div>
    <div class="content-header-block">
        <div class="content-title">{{ opportunity.jobTitle }}</div>
        <div class="content-tagline">{{ opportunity.company.name }}</div>
    </div>
</div>

<div ng-show="opportunity">
<div class="row">
    <div class="content-section container-fluid">
        <div class="formbox-title">

            <table class="formbox-footer-pure">
                <tr>
                    <td width="60%">
                    <img class="box-image" ng-show="{{ company.media[0].url }}" src="{{ company.media[0].url }}">
                    <img class="box-image" src="assets/images/test-company-img.png">
                    </td>
                    <td class="text-left" style="height: 100%">
                        <div class="float-container">
                            <div class="float-container-row">
                            <div class="float-top">
                                <span class="type-header text-left">{{ company.name }}</span><br>
                                <span class="type-subtitle">{{ company.city }}, {{ company.country }}</span><br>
                            </div>
                            </div>
                            <div class="float-container-row">
                            <div class="float-bottom">
                                <span class="type-normal">{{ company.description }}</span><br>
                                <div class="type-linkbox" ng-repeat="link in company.links">
                                    <span ng-show="$first">Learn more:</span><br>
                                    <span><a ng-href="{{link.url}}">{{link.url}}</a></span>
                                </div>
                            </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <div class="content-section container-fluid">
        <div class="formbox-title">Opportunity Information</div>
        <table class="formbox formbox-basic">
            <tr>
                <th>Job Title</th>
                <td class="type-header">{{ opportunity.jobTitle }}</td>
            </tr>
            <tr>
                <th>Links</th>
                <td>                        
                    <div ng-repeat="link in opportunity.links">
                        <span><a ng-href="{{link.url}}">{{link.url}}</a></span>
                    </div>
                </td>
            </tr>
            <tr>
                <th>Description</th>
                <td style="white-space:pre-wrap">{{ opportunity.description }}</td>
            </tr>
        </table>
    </div>

    <div class="content-section container-fluid">
        <div class="formbox-title">What the Employer Is Looking For</div>
        <div class="tablebox tablebox-basic">
            <div ng-repeat="tags in processedTags" ng-if="tags">
                <div ng-repeat="(key, tagType) in tags">
                    <table class="table table-condensed text-left" ng-show="tagType">
                        <thead>
                            <th width="40%">{{tags.importance === 'must' ? 'Must Have' : 'Nice to Have'}}</th>
                            <th width="20%">Your Profile</th>
                            <th width="20%">Recommended for This Opportunity</th>
                            <th width="20%">Comparison <span>{{'(' + score + '% match for employer)'}}</span></th>
                        </thead>
                        <tbody>
                            <tr ng-repeat="tag in tagType">
                                <td width="40%">{{tag.name}}</td>
                                <td width="20%">{{tag.userValue}}</td>
                                <td width="20%">{{tag.value}}</td>
                                <td><span class="glyphicon" ng-class="calculateFit(tag.importance, key, tag.value, tag.userValue)[0]" ng-if="tag.type !== 'text'" ng-style="{color: calculateFit(tag.importance, key, tag.value, tag.userValue)[1]}"></span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="content-section container-fluid">
        <div class="formbox-title">Indicate Interest</div>
        <div class="dashbox dashbox-content">
            <div class="dashbox-icon" ng-click="updateInterest(1)" ng-class="{'dashbox-icon-active':hasInterest(1)}">
                <span class="dashbox-icon-dingbat">➀</span><br>None
            </div>
            <div class="dashbox-icon" ng-click="updateInterest(2)" ng-class="{'dashbox-icon-active':hasInterest(2)}">
                <span class="dashbox-icon-dingbat">➁</span><br>Low
            </div>
            <div class="dashbox-icon" ng-click="updateInterest(3)" ng-class="{'dashbox-icon-active':hasInterest(3)}">
                <span class="dashbox-icon-dingbat">➂</span><br>Medium
            </div>
            <div class="dashbox-icon" ng-click="updateInterest(4)" ng-class="{'dashbox-icon-active':hasInterest(4)}">
                <span class="dashbox-icon-dingbat">➃</span><br>High
            </div>
        </div>
    </div>


    <div class="content-section container-fluid">
        <div class="formbox-title">Additional Questions</div>
        <form ng-submit="submit()">
            <table class="formbox formbox-freetext">
                <tr ng-show="questions" ng-repeat="question in questions | filter: {active: true}">
                    <td>{{ question.question }}</td>
                    <td><textarea type="text" size="40" ng-model="answers[question.index].answer"></textarea></td>
                </tr>
            </table>
            <div class="formbox-footer">
                <input class="content-button" type="submit" value="{{submitText}}" ng-disabled="pendingRequest === 0">
            </div>
        </form>
    </div>

</div><!-- end row -->
</div><!-- end ng-show -->
