<h1>Company Dossier</h1>
<h2>View or edit companies in detail</h2>

<button ng-init="readOnly=true" ng-click="readOnly=false" ng-show="readOnly">+ Edit Company</button>
<button ng-click="readOnly=true; update()" ng-show="!readOnly">Save Company</button>
<p>Company Information</p>

<table class="table table-striped table-condensed">
    <tr>
        <th>Company Name:</th>
        <td><input type="text" ng-readonly="readOnly" ng-model="company.name"></td>
    </tr>
    <tr>
        <th>Location:</th>
        <td>{{company.opportunities.length}}</td>
    </tr>
    <tr>
        <th>URL:</th>
        <td><input type="text" ng-readonly="readOnly" ng-model="company.url"></td>
    </tr>
    <tr>
        <th>Tagline:</th>
        <td><input type="text" ng-readonly="readOnly" ng-model="company.name"></td>
    </tr>
    <tr>
        <th>Brief Description:</th>
        <td><input type="text" ng-readonly="readOnly" ng-model="company.briefDescription"></td>
    </tr>

    <tr ng-show="readOnly && company.media.length === 0">
        <th>Media</th>
        <td></td>
    </tr>
    <tr ng-repeat="media in company.media track by $index">
        <th><span ng-show="$index === 0">Media</span></th>
        <td>
            <input type="text" ng-readonly="readOnly" ng-model="media.text">
            <button type="button" ng-click="removeMedia($index)" ng-show="!readOnly">Remove</button>
        </td>
    </tr>
    <tr ng-show="!readOnly">
        <th ng-show="company.media.length === 0">Media</th>
        <th ng-show="company.media.length !== 0"></th>
        <td><button type="button" ng-click="addMedia()">+ Add New</button></td>
    </tr>

    <tr ng-show="readOnly && company.links.length === 0">
        <th>Learn More</th>
        <td></td>
    </tr>
    <tr ng-repeat="link in company.links track by $index">
        <th><span ng-show="$index === 0">Learn More</span></th>
        <td>
            <input type="text" ng-readonly="readOnly" ng-model="link.text">
            <button type="button" ng-click="removeLink($index)" ng-show="!readOnly">Remove</button>
        </td>
    </tr>
    <tr ng-show="!readOnly">
        <th ng-show="company.links.length === 0">Learn More</th>
        <th ng-show="company.links.length !== 0"></th>
        <td><button type="button" ng-click="addLink()">+ Add New</button></td>
    </tr>
</table>

<p>Associated Opportunities</p>

<div class="section container-fluid" ng-show="opportunities">
    <div class="row">
        <table>
        <thead>
            <tr>
                <th></th><!-- empty table header -->
                <th>Name</th>
                <th>Interested Candidates</th>
                <th>URL</th>
                <th>Title</th>
                <th>Location</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="opportunity in opportunities">
                <td><a ui-sref="admin.opportunities.detail({_id: opportunity._id})">Detail Link</a></td>
                <td>{{ opportunity.company.name }}</td>
                <td>{{ opportunity.userInterest }}</td>
                <td>{{ opportunity.links[0] }}</td>
                <td>{{ opportunity.jobTitle }}</td>
                <td>{{ opportunity.company.city }}</td>
            </tr>
        </tbody>
        </table>
    </div>
</div>